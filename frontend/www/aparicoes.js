// ========================================
// üìú HIST√ìRIAS DAS APARI√á√ïES DE MARIA
// Conhe√ßa os lugares sagrados
// ========================================

const HistoriasAparicoes = {
    aparicoes: [
        {
            id: 'guadalupe',
            nome: 'Nossa Senhora de Guadalupe',
            local: 'Cidade do M√©xico, M√©xico',
            ano: 1531,
            vidente: 'S√£o Juan Diego',
            imagem: 'üá≤üáΩ',
            cor: '#006847',
            resumo: 'Maria apareceu ao √≠ndio Juan Diego no monte Tepeyac, deixando sua imagem milagrosamente impressa em seu manto (tilma).',
            historia: `Em dezembro de 1531, a Virgem Maria apareceu quatro vezes ao √≠ndio asteca Juan Diego no monte Tepeyac, pr√≥ximo √† Cidade do M√©xico.

Maria se apresentou como a "M√£e do verdadeiro Deus" e pediu que uma igreja fosse constru√≠da naquele local. O bispo Juan de Zum√°rraga inicialmente n√£o acreditou em Juan Diego.

Na √∫ltima apari√ß√£o, Maria pediu que Juan Diego colhesse rosas no topo do monte - algo imposs√≠vel no inverno. Quando ele abriu seu manto (tilma) diante do bispo, as rosas ca√≠ram e a imagem de Maria estava milagrosamente impressa no tecido.

A tilma, feita de fibra de cacto que deveria durar apenas 20 anos, permanece intacta at√© hoje, ap√≥s quase 500 anos. A imagem possui caracter√≠sticas inexplic√°veis pela ci√™ncia, como pupilas que refletem a cena da apari√ß√£o.

Nossa Senhora de Guadalupe √© a padroeira das Am√©ricas e do M√©xico. Sua bas√≠lica recebe mais de 20 milh√µes de peregrinos por ano, sendo o santu√°rio mariano mais visitado do mundo.`,
            oracaoEspecial: 'Virgem Sant√≠ssima de Guadalupe, M√£e das Am√©ricas, olhai por n√≥s com vossos olhos misericordiosos. Assim como deixastes vossa imagem no manto de Juan Diego, imprimi em nossos cora√ß√µes o amor ao vosso Filho Jesus. Am√©m.',
            curiosidades: [
                'A tilma deveria ter se desintegrado em 20 anos, mas j√° dura quase 500',
                'Os olhos de Maria na imagem cont√™m reflexos microsc√≥picos de 13 pessoas',
                'As estrelas no manto correspondem √† constela√ß√£o do dia da apari√ß√£o',
                'A imagem n√£o tem pinceladas - a origem √© inexplic√°vel'
            ],
            festa: '12 de dezembro'
        },
        {
            id: 'fatima',
            nome: 'Nossa Senhora de F√°tima',
            local: 'F√°tima, Portugal',
            ano: 1917,
            vidente: 'L√∫cia, Francisco e Jacinta',
            imagem: 'üáµüáπ',
            cor: '#006600',
            resumo: 'Maria apareceu a tr√™s pastorinhos portugueses, revelando tr√™s segredos e pedindo ora√ß√£o e penit√™ncia pela paz mundial.',
            historia: `Entre maio e outubro de 1917, a Virgem Maria apareceu seis vezes a tr√™s crian√ßas pastoras: L√∫cia dos Santos (10 anos) e seus primos Francisco (9) e Jacinta Marto (7), na Cova da Iria, em F√°tima, Portugal.

Maria se identificou como "Nossa Senhora do Ros√°rio" e pediu a reza di√°ria do ter√ßo pela paz no mundo e a convers√£o dos pecadores. Ela confiou tr√™s segredos √†s crian√ßas:

1¬∫ Segredo: Uma vis√£o do inferno
2¬∫ Segredo: A consagra√ß√£o da R√∫ssia e a devo√ß√£o ao Imaculado Cora√ß√£o
3¬∫ Segredo: Uma vis√£o de persegui√ß√£o √† Igreja (revelado em 2000)

Na √∫ltima apari√ß√£o, em 13 de outubro de 1917, ocorreu o "Milagre do Sol", presenciado por cerca de 70.000 pessoas. O sol "dan√ßou" no c√©u, girando e emitindo cores, antes de parecer cair sobre a multid√£o.

Francisco e Jacinta morreram jovens e foram canonizados em 2017. Irm√£ L√∫cia viveu como carmelita at√© 2005. O Santu√°rio de F√°tima √© um dos mais importantes centros de peregrina√ß√£o do mundo.`,
            oracaoEspecial: '√ì minha boa M√£e do C√©u, vossa imagem venerada, lembra tantas apari√ß√µes na terra portuguesa amada. Dai-nos f√© para crer em vossas palavras. Dai-nos amor para converter os pecadores. Am√©m.',
            curiosidades: [
                '70.000 pessoas testemunharam o Milagre do Sol',
                'O 3¬∫ segredo foi revelado apenas em 2000 pelo Papa Jo√£o Paulo II',
                'Francisco e Jacinta s√£o os santos n√£o-m√°rtires mais jovens da Igreja',
                'A bala que atingiu Jo√£o Paulo II est√° na coroa da imagem de F√°tima'
            ],
            festa: '13 de maio'
        },
        {
            id: 'lourdes',
            nome: 'Nossa Senhora de Lourdes',
            local: 'Lourdes, Fran√ßa',
            ano: 1858,
            vidente: 'Santa Bernadette Soubirous',
            imagem: 'üá´üá∑',
            cor: '#0055A4',
            resumo: 'Maria apareceu 18 vezes a uma jovem pobre na gruta de Massabielle, revelando-se como a Imaculada Concei√ß√£o.',
            historia: `Entre fevereiro e julho de 1858, a Virgem Maria apareceu 18 vezes a Bernadette Soubirous, uma menina pobre e doente de 14 anos, na gruta de Massabielle, em Lourdes, sul da Fran√ßa.

Na primeira apari√ß√£o, Bernadette viu "uma Senhora vestida de branco, com um cinto azul e uma rosa amarela em cada p√©". A Senhora n√£o se identificou inicialmente, pedindo apenas que Bernadette voltasse durante 15 dias.

Na nona apari√ß√£o, a Senhora pediu que Bernadette cavasse no ch√£o da gruta. Uma fonte de √°gua brotou e continua fluindo at√© hoje. Esta √°gua √© associada a milhares de curas milagrosas.

Na 16¬™ apari√ß√£o, quando Bernadette perguntou quem ela era, a Senhora respondeu em dialeto local: "Que soy era Immaculada Councepciou" (Eu sou a Imaculada Concei√ß√£o) - confirmando o dogma proclamado pelo Papa apenas 4 anos antes.

Bernadette tornou-se freira e foi canonizada em 1933. Seu corpo permanece incorrupto. Lourdes recebe cerca de 6 milh√µes de peregrinos por ano, e a Igreja reconheceu oficialmente 70 curas milagrosas.`,
            oracaoEspecial: 'Nossa Senhora de Lourdes, que aparecestes a Bernadette na gruta de Massabielle, rogai por todos os doentes e aflitos. Concedei-nos a gra√ßa da cura do corpo e da alma. Am√©m.',
            curiosidades: [
                'Mais de 7.000 curas foram relatadas, 70 reconhecidas oficialmente',
                'O corpo de Santa Bernadette permanece incorrupto desde 1879',
                'A √°gua da fonte n√£o tem propriedades medicinais detect√°veis',
                'Bernadette n√£o sabia o significado de "Imaculada Concei√ß√£o" quando ouviu'
            ],
            festa: '11 de fevereiro'
        },
        {
            id: 'aparecida',
            nome: 'Nossa Senhora Aparecida',
            local: 'Aparecida, S√£o Paulo, Brasil',
            ano: 1717,
            vidente: 'Pescadores Domingos, Jo√£o e Felipe',
            imagem: 'üáßüá∑',
            cor: '#009739',
            resumo: 'Uma pequena imagem de Nossa Senhora da Concei√ß√£o foi encontrada por pescadores no Rio Para√≠ba, tornando-se a Padroeira do Brasil.',
            historia: `Em outubro de 1717, tr√™s pescadores - Domingos Garcia, Jo√£o Alves e Felipe Pedroso - foram convocados para pescar no Rio Para√≠ba do Sul para um banquete em honra do Conde de Assumar.

Ap√≥s horas sem sucesso, Jo√£o Alves lan√ßou sua rede e trouxe o corpo de uma pequena imagem de terracota. Na tentativa seguinte, pescou a cabe√ßa. Era uma imagem de Nossa Senhora da Concei√ß√£o, escurecida pelo tempo nas √°guas.

Ap√≥s reunir as partes, os pescadores lan√ßaram novamente a rede e pescaram quantidade t√£o grande de peixes que tiveram que retornar, com medo de a canoa afundar.

A imagem ficou com a fam√≠lia de Felipe Pedroso por 15 anos, onde vizinhos come√ßaram a se reunir para rezar. Milagres come√ßaram a ser relatados: velas que se acendiam sozinhas, uma corrente de escravo que se partiu durante uma ora√ß√£o.

Em 1745, foi constru√≠da a primeira capela. Em 1929, Nossa Senhora Aparecida foi proclamada Rainha e Padroeira do Brasil. A atual Bas√≠lica, inaugurada em 1980, √© o maior templo mariano do mundo e o segundo maior templo cat√≥lico, recebendo 12 milh√µes de peregrinos por ano.`,
            oracaoEspecial: '√ì incompar√°vel Senhora da Concei√ß√£o Aparecida, M√£e de Deus, Rainha dos Anjos, Advogada dos pecadores, ref√∫gio e consola√ß√£o dos aflitos, Virgem Sant√≠ssima, cheia de gra√ßa e miseric√≥rdia, aben√ßoai o Brasil e todos os brasileiros. Am√©m.',
            curiosidades: [
                'A imagem tem apenas 36 cm de altura',
                'O manto azul foi presente da Princesa Isabel em 1888',
                'A Bas√≠lica comporta 45.000 pessoas sentadas',
                '12 de outubro √© feriado nacional no Brasil'
            ],
            festa: '12 de outubro'
        },
        {
            id: 'medjugorje',
            nome: 'Nossa Senhora de Medjugorje',
            local: 'Medjugorje, B√≥snia-Herzegovina',
            ano: 1981,
            vidente: 'Seis jovens videntes',
            imagem: 'üáßüá¶',
            cor: '#002395',
            resumo: 'Apari√ß√µes que continuam at√© hoje, com mensagens de paz, convers√£o e ora√ß√£o, especialmente o ros√°rio.',
            historia: `Em 24 de junho de 1981, seis jovens croatas - Ivanka, Mirjana, Vicka, Ivan, Marija e Jakov - afirmaram ver a Virgem Maria no monte Podbrdo, em Medjugorje, ent√£o parte da Iugosl√°via.

Desde ent√£o, alguns videntes afirmam receber apari√ß√µes di√°rias, enquanto outros recebem mensagens em datas espec√≠ficas. Maria se apresenta como a "Rainha da Paz" (Kraljica Mira) e transmite mensagens focadas em cinco pontos:

1. Paz
2. F√©
3. Convers√£o
4. Ora√ß√£o (especialmente o Ros√°rio)
5. Jejum

As apari√ß√µes ainda n√£o foram oficialmente reconhecidas pela Igreja, mas o Papa Francisco autorizou peregrina√ß√µes oficiais em 2019. Milh√µes de peregrinos visitam Medjugorje anualmente, e incont√°veis convers√µes e curas s√£o relatadas.

Os videntes afirmam ter recebido 10 segredos sobre o futuro do mundo, que ser√£o revelados quando Maria assim determinar. As apari√ß√µes s√£o consideradas as mais extensas e documentadas da hist√≥ria.`,
            oracaoEspecial: 'Rainha da Paz, que em Medjugorje nos chamais √† convers√£o e √† ora√ß√£o, ajudai-nos a viver vossas mensagens. Que a paz reine em nossos cora√ß√µes, em nossas fam√≠lias e no mundo inteiro. Am√©m.',
            curiosidades: [
                'Mais de 40 milh√µes de pessoas j√° visitaram Medjugorje',
                'Os videntes foram extensivamente estudados por cientistas',
                'As apari√ß√µes continuam acontecendo h√° mais de 40 anos',
                'O Papa Francisco autorizou peregrina√ß√µes oficiais em 2019'
            ],
            festa: '25 de junho'
        },
        {
            id: 'akita',
            nome: 'Nossa Senhora de Akita',
            local: 'Akita, Jap√£o',
            ano: 1973,
            vidente: 'Irm√£ Agnes Sasagawa',
            imagem: 'üáØüáµ',
            cor: '#BC002D',
            resumo: 'Uma imagem de Maria chorou 101 vezes, com mensagens sobre ora√ß√£o e advert√™ncias para a humanidade.',
            historia: `Entre 1973 e 1981, a Irm√£ Agnes Sasagawa, uma freira surda do Instituto das Servas da Eucaristia em Akita, Jap√£o, recebeu mensagens de uma imagem de Nossa Senhora que milagrosamente chorou, suou e sangrou.

A imagem de madeira chorou 101 vezes entre 1975 e 1981, fen√¥menos testemunhados por centenas de pessoas e documentados pela televis√£o japonesa.

Em 13 de outubro de 1973 (anivers√°rio do Milagre do Sol de F√°tima), Maria transmitiu uma mensagem solene: advertiu sobre um castigo maior que o dil√∫vio se a humanidade n√£o se convertesse, pediu ora√ß√£o e penit√™ncia, e alertou sobre divis√µes dentro da Igreja.

As apari√ß√µes foram aprovadas pelo bispo local em 1984 e confirmadas pelo Cardeal Ratzinger (futuro Papa Bento XVI), que as considerou uma continua√ß√£o da mensagem de F√°tima.

Irm√£ Agnes recuperou milagrosamente a audi√ß√£o ap√≥s anos de surdez total.`,
            oracaoEspecial: 'Nossa Senhora de Akita, que chorastes por nossos pecados, tocai nossos cora√ß√µes endurecidos. Concedei-nos a gra√ßa da convers√£o e ajudai-nos a reparar as ofensas cometidas contra o Cora√ß√£o de Jesus e o vosso Imaculado Cora√ß√£o. Am√©m.',
            curiosidades: [
                'A imagem chorou exatamente 101 vezes',
                'As l√°grimas foram analisadas e confirmadas como humanas',
                'Irm√£ Agnes era completamente surda e foi curada',
                'Aprovada oficialmente pela Igreja em 1984'
            ],
            festa: '15 de agosto'
        }
    ],

    // Abrir lista de apari√ß√µes
    abrir() {
        const modal = document.createElement('div');
        modal.id = 'tela-aparicoes';
        modal.className = 'fixed inset-0 z-[60] overflow-y-auto';
        modal.style.background = 'linear-gradient(180deg, #0a0612 0%, #1a1025 50%, #0a0612 100%)';
        
        modal.innerHTML = `
            <div class="min-h-screen pb-8">
                <!-- Header -->
                <div class="sticky top-0 z-10 bg-gradient-to-b from-[#0a0612] via-[#0a0612] to-transparent p-4 pb-8">
                    <div class="flex items-center justify-between mb-4">
                        <button onclick="HistoriasAparicoes.fechar()" class="p-2 bg-white/10 rounded-full hover:bg-white/20 transition-all">
                            <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>
                        </button>
                        <h1 class="text-white text-xl font-bold">üìú Apari√ß√µes de Maria</h1>
                        <div class="w-10"></div>
                    </div>
                    
                    <p class="text-white/60 text-sm text-center">Conhe√ßa os lugares onde Maria apareceu</p>
                </div>
                
                <div class="px-4 space-y-4">
                    ${this.aparicoes.map(ap => `
                        <div onclick="HistoriasAparicoes.abrirDetalhes('${ap.id}')" class="bg-white/5 backdrop-blur rounded-2xl overflow-hidden border border-white/10 hover:border-white/30 transition-all cursor-pointer">
                            <div class="h-2" style="background: ${ap.cor}"></div>
                            <div class="p-4">
                                <div class="flex items-start gap-4">
                                    <div class="w-16 h-16 rounded-xl bg-gradient-to-br from-white/10 to-white/5 flex items-center justify-center text-3xl flex-shrink-0">
                                        ${ap.imagem}
                                    </div>
                                    <div class="flex-1">
                                        <h3 class="text-white font-bold">${ap.nome}</h3>
                                        <p class="text-white/50 text-xs">${ap.local} ‚Ä¢ ${ap.ano}</p>
                                        <p class="text-white/70 text-sm mt-2 line-clamp-2">${ap.resumo}</p>
                                    </div>
                                    <svg class="w-5 h-5 text-white/30 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/></svg>
                                </div>
                            </div>
                        </div>
                    `).join('')}
                </div>
            </div>
        `;
        
        document.body.appendChild(modal);
        document.body.style.overflow = 'hidden';
    },

    // Abrir detalhes de uma apari√ß√£o
    abrirDetalhes(id) {
        const ap = this.aparicoes.find(a => a.id === id);
        if (!ap) return;
        
        const detalhe = document.createElement('div');
        detalhe.id = 'detalhe-aparicao';
        detalhe.className = 'fixed inset-0 z-[65] overflow-y-auto';
        detalhe.style.background = 'linear-gradient(180deg, #0a0612 0%, #1a1025 100%)';
        
        detalhe.innerHTML = `
            <div class="min-h-screen pb-8">
                <!-- Header com cor da apari√ß√£o -->
                <div class="relative">
                    <div class="h-40 bg-gradient-to-br" style="background: linear-gradient(135deg, ${ap.cor}dd, ${ap.cor}66)">
                        <div class="absolute inset-0 flex items-center justify-center text-8xl opacity-30">
                            ${ap.imagem}
                        </div>
                    </div>
                    <button onclick="document.getElementById('detalhe-aparicao').remove()" class="absolute top-4 left-4 p-2 bg-black/30 backdrop-blur rounded-full hover:bg-black/50 transition-all">
                        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/></svg>
                    </button>
                </div>
                
                <div class="px-4 -mt-10 relative z-10">
                    <!-- Card principal -->
                    <div class="bg-gradient-to-br from-gray-900/95 to-gray-800/95 backdrop-blur rounded-2xl p-5 border border-white/10 mb-6">
                        <h1 class="text-white text-2xl font-bold mb-1">${ap.nome}</h1>
                        <p class="text-white/50 text-sm mb-4">${ap.local} ‚Ä¢ ${ap.ano}</p>
                        
                        <div class="flex items-center gap-4 text-sm">
                            <div class="flex items-center gap-1 text-white/70">
                                <span>üë§</span>
                                <span>${ap.vidente}</span>
                            </div>
                            <div class="flex items-center gap-1 text-white/70">
                                <span>üìÖ</span>
                                <span>${ap.festa}</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Hist√≥ria -->
                    <div class="mb-6">
                        <h2 class="text-white font-semibold mb-3 flex items-center gap-2">
                            <span>üìñ</span> A Hist√≥ria
                        </h2>
                        <div class="bg-white/5 rounded-xl p-4 border border-white/10">
                            <p class="text-white/80 text-sm leading-relaxed whitespace-pre-line">${ap.historia}</p>
                        </div>
                    </div>
                    
                    <!-- Ora√ß√£o -->
                    <div class="mb-6">
                        <h2 class="text-white font-semibold mb-3 flex items-center gap-2">
                            <span>üôè</span> Ora√ß√£o
                        </h2>
                        <div class="bg-gradient-to-br from-yellow-900/20 to-orange-900/20 rounded-xl p-4 border border-yellow-500/20">
                            <p class="text-white/90 text-sm italic leading-relaxed">"${ap.oracaoEspecial}"</p>
                        </div>
                    </div>
                    
                    <!-- Curiosidades -->
                    <div class="mb-6">
                        <h2 class="text-white font-semibold mb-3 flex items-center gap-2">
                            <span>‚ú®</span> Curiosidades
                        </h2>
                        <div class="space-y-2">
                            ${ap.curiosidades.map(c => `
                                <div class="bg-white/5 rounded-xl p-3 border border-white/10 flex items-start gap-3">
                                    <span class="text-yellow-400">‚Ä¢</span>
                                    <p class="text-white/70 text-sm">${c}</p>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                    
                    <!-- Bot√£o rezar -->
                    <button onclick="HistoriasAparicoes.rezarPelaAparicao('${ap.id}')" class="w-full py-4 bg-gradient-to-r from-blue-600 to-purple-600 text-white font-bold rounded-2xl hover:from-blue-500 hover:to-purple-500 transition-all flex items-center justify-center gap-2">
                        <span>üôè</span>
                        <span>Rezar por ${ap.nome.split(' de ')[1] || ap.nome}</span>
                    </button>
                </div>
            </div>
        `;
        
        document.body.appendChild(detalhe);
    },

    // Rezar pela apari√ß√£o
    rezarPelaAparicao(id) {
        const ap = this.aparicoes.find(a => a.id === id);
        if (!ap) return;
        
        document.getElementById('detalhe-aparicao')?.remove();
        this.fechar();
        
        // Enviar mensagem autom√°tica no chat
        const input = document.getElementById('input-mensagem');
        if (input) {
            input.value = `Maria, quero rezar pedindo a intercess√£o de ${ap.nome}. ${ap.oracaoEspecial}`;
            if (window.enviarMensagem) enviarMensagem();
        }
    },

    // Fechar
    fechar() {
        document.getElementById('tela-aparicoes')?.remove();
        document.body.style.overflow = '';
    }
};

window.HistoriasAparicoes = HistoriasAparicoes;
